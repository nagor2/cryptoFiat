<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INTDAO</title>
    <script src="js/web3.min.js"></script>
    <script src="js/stat.js"></script>
    <script src="js/dao.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type='text/javascript' >
        $(document).ready(function(){
            $("#unlockDiv").hide();
            $("#voting").hide();
            $("#votingParams").hide();
            $("#vote").hide();
            $("#getMetaMask").hide();
        })
    </script>
</head>
<body>
<a href="#" onclick="$('#unlockDiv').slideToggle();">show/hide</a>
<div class="body flex-container">
    <div id = "getMetaMask" style="visibility: hidden;" align="center">
        <h3>To interact with blockchain application, please install MetaMask for your platform<br></h3>
        <a href = "https://chrome.google.com/webstore/detail/nkbihfbeogaeaoehlefnkodbefgpgknn"><img
                src="img/chrome.png" height="50" width="50"/></a>
        <a href = "https://play.google.com/store/apps/details?id=io.metamask">
            <img src="img/android.png" height="50" width="50"/></a>
        <a href = "http://testflight.apple.com/join/4cYoRF4M"><img src="img/ios.png" height="50" width="50"/></a>
    </div>
    <div id="unlockDiv" >
    <table style="background-color :white">
        <tr>
            <td width="100px"><a href="#" onclick=""><img src = "/img/metamask.png"></a></td>
        </tr>
    </table>
</div>
</div>

<p>ETH price: <span style="font-weight: bold;" id="ethPrice"></span><br>
<p>Your address: <span style="font-weight: bold;" id="userAddress"></span><br>
<p>network: <span style="font-weight: bold;" id="network"></span><br>
<p>ETH balance: <span style="font-weight: bold;" id="ethValue"></span></p>
<p>WETH balance: <span style="font-weight: bold;" id="wethBalance"></span></p>
<p>stableCoinBalance balance: <span style="font-weight: bold;" id="stableCoinBalance"></span></p>


<table border="1" width="100%">
    <tr>
        <td>
            <h2>StableCoin</h2>
            <p>address: <span style="font-weight: bold;" id="stableCoinLink"></span></p>
            <p>total supply: <span style="font-weight: bold;" id="stableCoinSupply"></span></p>
            <p>N of transactions (iterate transfers): <span style="font-weight: bold;" id="stableTxCount"></span></p>
            <p>N of holders (iterate addresses): <span style="font-weight: bold;" id="stableHolders"></span></p>
            <p>price vs USD (pool):</p>
            <p>price vs USD (indicative): <span style="font-weight: bold;" id="indicativePrice"></span></p>
            <p>overall collateral: <span style="font-weight: bold;" id="overallCollateral"></span></p>
            <p>stabilization fund: <span style="font-weight: bold;" id="stabFund"></span></p>
            <p>pool volume:</p>
            <input type="button" value="Buy from pool">
        </td>
        <td>
            <h2>INTDAO</h2> <input type="button" value="renew contracts" onclick="dao.methods.renewContracts().send({from:userAddress});">
            <p>address: <span style="font-weight: bold;" id="daoLink"></span></p>
            <p>WETH address:<span style="font-weight: bold;" id="wethLink"></span></p>
            <p>authorized:</p>

            <h3>Is active voting: <span style="font-weight: bold;" id="activeVoting"></span></h3>
            <a href="#" onclick="$('#votingParams').slideToggle();">last/current voting</a>
            <div id="votingParams">
                <p>
                totalPositive: <span style="font-weight: bold;" id="totalPositive"></span><br>
                voteingType: <span style="font-weight: bold;" id="voteingType"></span><br>
                name: <span style="font-weight: bold;" id="voteingName"></span><br>
                value: <span style="font-weight: bold;" id="voteingValue"></span><br>
                addr: <span style="font-weight: bold;" id="voteingAddress"></span><br>
                startTime: <span style="font-weight: bold;" id="voteingStartTime"></span><br>
                decision: <span style="font-weight: bold;" id="voteingDecision"></span><br>
                </p>
                <input type="button" id="claimToFinalizeButton" value="claimToFinalize" onclick="claimToFinalize();">
            </div>
            <a href="#" onclick="$('#voting').slideToggle();">add voting</a>
            <div id = "voting">
                <select id="votingType">
                    <option value="1">Param</option>
                    <option value="2">Address</option>
                    <option value="3">Pause (on/off)</option>
                    <option value="4">Authorize (on/off)</option>
                </select>
                <input type="text" id="name" value="name">
                <input type="text" id="value" value="value">
                <input type="text" id="addr" value="addr">
                <input type="checkbox" id="decision">
                <input type="button" value="add voting" onclick="newVoting();">
            </div>
            <a href="#" onclick="$('#vote').slideToggle();">Vote</a>
            <div id = "vote">
                <input type="checkbox" id="VoteDecision">
                <input type="button" value="vote" onclick="sendVote();">
            </div>
            <p>ruleBalanceOf DAO: <span style="font-weight: bold;" id="ruleBalanceOfDAO"></span></p>
            <p>Pooled tokens: <span style="font-weight: bold;" id="overallPooled"></span></p>
            <p>Your allowed tokens: <span style="font-weight: bold;" id="allowed"></span></p>
            <p>Your pooled tokens: <span style="font-weight: bold;" id="pooled"></span></p>
            <input type="text" value="100" id="tokensToPool">
            <input type="button" value="allow tokens" onclick="allowRuleTokensToDao();">
            <input type="button" value="pool tokens" onclick="poolTokens();">
            <input type="button" value="return tokens" onclick="returnTokens();">
        </td>

        <td>
            <h2>Rule</h2>
            <p>address: <span style="font-weight: bold;" id="ruleLink"></span></p>
            <p>total supply: <span style="font-weight: bold;" id="ruleSupply"></span></p>
            <p>your balance: <span style="font-weight: bold;" id="ruleBalance"></span></p>
            <p>N of transactions (iterate transfers): <span style="font-weight: bold;" id="ruleTxCount"></span></p>
            <p>N of holders: <span style="font-weight: bold;" id="ruleHolders"></span></p>
            <p>price in stableCoins (from pool):</p>
            <p>marketCap: <span style="font-weight: bold;" id="ruleMarketCap"></span></p>
            <p>pool volume:</p>
            <input type="button" value="Buy from pool">
        </td>
    </tr>
    <tr>
        <td>
            <h2>Deposit</h2>
            <p>address: <span style="font-weight: bold;" id="depositLink"></span></p>
            <p>N of deposits: <span style="font-weight: bold;" id="depositsCount"></span></p>
            <p>overall fee payed: <span style="font-weight: bold;" id="overallDepositFeePayed"></span></p>
            <p>overall volume: <span style="font-weight: bold;" id="overallDeposits"></span></p>
            <p>interest rate: <span style="font-weight: bold;" id="depositRate"></span></p>
            <input type="button" value="Deposit">
            <h3>My deposit</h3>
            <p>opened:</p>
            <p>updated:</p>
            <p>volume:</p>
            <p>rate:</p>
            <p>accumulated interest:</p>
            <input type="button" value="topUp">
            <input type="button" value="withdraw">
            <input type="button" value="claim interest">

        </td>
        <td>
            <h2>Borrow</h2><input type="button" value="renew contracts" onclick="cdp.methods.renewContracts().send({from:userAddress});">
            <p>your stable coin allowance: <span style="font-weight: bold;" id="cdpAllowance"></span></p>
            <p>address: <span style="font-weight: bold;" id="cdpLink"></span></p>
            <p>weth ballance: <span style="font-weight: bold;" id="cdpWethBalance"></span></p>
            <p>positions count: <span style="font-weight: bold;" id="positionsCount"></span></p>
            <p>overall fee earned: <span style="font-weight: bold;" id="overallCDPFeeEarned"></span></p>
            <p>overall fee payed: <span style="font-weight: bold;" id="overallCDPFeePayed"></span></p>
            <p>collateral discount: <span style="font-weight: bold;" id="collateralDiscount"></span></p>
            <p>interest rate: <span style="font-weight: bold;" id="interestRate"></span></p>
            <input type="text" id ="stableCoinsAmount" value="stableCoinsAmount">
            <input type="text" id ="ethCollateral" value="ethCollateral">
            <input type="button" value="Borrow" onclick="openCDP()">
            <input type="button" value="allowCoins" onclick="allowCoinsToCDP()">
            <h3>My dept positions:</h3>
            <div id="cdps"></div>
        </td>
        <td>
            <h2>Cart</h2><input type="button" value="renew contracts" onclick="cart.methods.renewContracts().send({from:userAddress});">
            <p>address: <span style="font-weight: bold;" id="cartLink"></span></p>
            <p>itemsCount: <span style="font-weight: bold;" id="itemsCount"></span></p>

                <table id="cartItems" width="100%" border="1">
                </table>

            <p>instruments: (actual price, blockchain price, share, last time updated)</p>
            <input type="button" value="claim update">
            <input type="button" value="buy oracle tokens">
        </td>
    </tr>
    <tr>
        <td>
            <h2>Auction</h2>
            <p>address: <span style="font-weight: bold;" id="auctionLink"></span></p>
            <p>current auctions:</p>
            <input type="button" value="bid">
            <p>last bids:</p>
            <p>last auctions:</p>
        </td>
        <td>
            <h2>Invest</h2>
            <p>top projects:</p>
            <input type="button" value="Buy tokens">
            <p>top commodities:</p>
            <input type="button" value="Buy commodities">
        </td>
        <td>
            <h2>Inflation:</h2>
            <p>address: <span style="font-weight: bold;" id="inflationLink"></span></p>
            <p>annual percent: <span style="font-weight: bold;" id="annualInflation"></span></p>
            <p>accumulated volume:</p>
            <p>last emission: <span style="font-weight: bold;" id="lastEmission"></span></p>
            <p>spender address: <span style="font-weight: bold;" id="inflationSpender"></span></p>
            <input type="button" value="claim emission" onclick="claimEmission()">
        </td>
    </tr>
</table>

</body>
</html>